from bs4 import BeautifulSoup
import sys
import urllib.request
import math


def check_build():
    current_build = int(str(sys.getwindowsversion()).split()[2][6:-1])
    url = "https://winreleaseinfoprod.blob.core.windows.net/winreleaseinfoprod/en-US.html"
    request = urllib.request.urlopen(url)
    data = request.read().decode('utf-8')
    soup = BeautifulSoup(data, features="html.parser")
    highlight = soup.find_all("tr", class_="highlight")
    recent_build = math.floor(float(str(highlight).split('\n')[4][4:-5]))
    link = "<a href='https://support.microsoft.com/en-us/help/4027667/windows-10-update'>Link</a>"
    if current_build < recent_build:
        return_value = (False, "You're not running the most recent Windows 10 build. "
                               "You can find information about updating it here: "
                               "{}".format(link))
    else:
        return_value = (True, "Your OS is up to date. Passed test.")
    return return_value
